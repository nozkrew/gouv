{% extends 'base.html.twig' %}

{% block title %}Rentabilité par ville{% endblock %}

{% block body %}

<div class="container">
    
    {{form_start(form)}}
    {{form_rest(form)}}
    <button type="submit" class="btn btn-primary">Rechercher</button>
    {{form_end(form)}}
    
    <table class="table table-striped" id="table">
        <thead>
            <tr>
                <th>Ville</th>
                <th>Prix m²</th>
                <th>Population</th>
                <th>Lien Data France</th>
                <th>Détails</th>
            </tr>
        </thead>
        <tbody>
             {% for city in cities %}
                
                    <tr>
                        <td>{{city.name}} ({{city.zipCode}})</td>
                        {% if city.price is not null and city.price.priceMeter is not null %}
                            <td data-order="{{city.price.priceMeter}}">{{city.price.priceMeter}}</td>
                        {% else %}
                            <td data-order="0">N/A</td>
                        {% endif %}
                        {% if city.population is not null %}
                            <td data-order="{{city.population.total}}">{{city.population.total}}</td>
                        {% else %}
                            <td data-order="0">N/A</td>
                        {% endif %}
                        <td><a href="{{url_datafrance~(city.slug)|replace({' ':'-'})~"-"~city.zipCode}}" target="_blank">Voir</a></td>
                        <td><a href="{{path("app_main_detailcity", {'city_id':city.id})}}" target="_blank">Détails</a></td>
                    </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block javascripts %}
    {{parent()}}
    <script type="text/javascript">
        
    </script>
{% endblock %}